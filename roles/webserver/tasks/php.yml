---
- name: install php (and other requirements)
  pacman:
      name: "{{ item }}"
      state: installed
  with_items:
      - php
      - php-apache
      - php-apcu-bc
      - php-intl
      - php-mcrypt
      - pear-auth-sasl
      - pear-mail-mime
      - pear-net-idna2
      - pear-net-smtp
      - pear-net-socket
  notify: restart httpd
  tags:
      - php
      - owncloud
      - roundcube

- name: configure php
  copy:
      src: files/php/php.ini
      dest: /etc/php/php.ini
      owner: root
      group: root
      mode: 0644
  notify: restart httpd
  tags:
      - php
      - owncloud
      - roundcube

- name: configure apcu
  copy:
      src: files/php/conf.d/apcu.ini
      dest: /etc/php/conf.d/apcu.ini
      owner: root
      group: root
      mode: 0644
  notify: restart httpd
  tags:
      - php
      - owncloud
      - roundcube
